#include "stdafx.h"
#include <windows.h>
// We only include teh DllMain function , which will be automatically called when the dll is loaded to the virtual address space of a process
INT APIENTRY DllMain(HMODULE hDLL, DWORD Reason, LPVOID Reserved) {
	/* open file */
	FILE *file;
	fopen_s( &file, "C:\\test\\temp.txt", "a+");  //Please note here ,some Windows forbid creating on Disk root directly without administrator privilege by default 
	//So the safe solution to do this , make sure this won't be the handicap of creating a file , is to create a folder first ,then put your file in .
	

	switch (Reason) {
	case DLL_PROCESS_ATTACH:
		fprintf(file, "DLL attach function called.\n");
		break;
	case DLL_PROCESS_DETACH:
		fprintf(file, "DLL detach function called.\n");
		break;
	case DLL_THREAD_ATTACH:
		fprintf(file, "DLL thread attach function called.\n");
		break;
	case DLL_THREAD_DETACH:
		fprintf(file, "DLL thread detach function called.\n");
		break;
	}

	/* close file */
	fclose(file);

	return TRUE;
}
//This turned out to be executable in Windows 10  using default user account 
